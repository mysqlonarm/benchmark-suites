
#### mysqld configuration
[mysqld]
basedir=/opt/projects/mysql/80/mysqlonarm/oracle/installed/
datadir=/data/mysql-data/node1/dn1/
port=4000
socket=/tmp/n1.sock
mysqlx=0
log-error-verbosity=3
server-id=1

#### bin-log
binlog_format = ROW
# since server is running in standalone this is fine.
binlog_row_image=MINIMAL

#### general: mysql client connection params
max_prepared_stmt_count=1000000
max_connections=4096
back_log=6000
table_open_cache=100000
table_open_cache_instances=64
innodb_open_files=4000

#### buffer pool tunnin (normally 75% of system memory).
innodb_buffer_pool_size=25G
innodb_buffer_pool_instances=8

#### redolog tunning
innodb_log_file_size=3G
innodb_log_files_in_group=2
innodb_log_buffer_size=64M

#### tune flushing behavior
innodb_max_dirty_pages_pct=90
innodb_max_dirty_pages_pct_lwm=10
innodb_lru_scan_depth=1024
innodb_flush_method=O_DIRECT  # recommended as innodb has its own buffer pool cache
innodb_flush_neighbors=0      # neighbors flushing turned off for SSD
innodb_page_cleaners=4        # should not exceed number of buffer pool instance

innodb_buffer_pool_dump_at_shutdown=0
innodb_buffer_pool_load_at_startup=0

#### max should be = IOPS for the allocated vm
innodb_io_capacity=12000
innodb_io_capacity_max=24000

# read/write io threads
innodb_read_io_threads=8
innodb_write_io_threads=8
innodb_purge_threads=4

# disable innodb ahi
# through our local testing we observed that AHI is not able to distribute
# keys evenly among the N buckets. Also, especially with benchmarking
# warmup load and time will affect the AHI build.
# rule-out this config that can cause variable load.
innodb_adaptive_hash_index=0

# tuning mainly for queries
join_buffer_size=256K
sort_buffer_size=256K

# enable numa interleave if the machine/vm has more than 1 NUMA node
innodb_numa_interleave=1

